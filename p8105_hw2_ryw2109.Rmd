---
title: "hw2_ryw2109"
author: "Rita Wang"
date: "2024-10-02"
output: github_document
---

### Question 0
```{r libraries, echo = FALSE, message = FALSE, warning = FALSE}
library(tidyverse)
library(readxl) # Needed to import excel files
```

```{r importing_data, echo = FALSE, message = FALSE, warning = FALSE}
# Question 2 dataset
trash_df = read_excel("./data/202409 Trash Wheel Collection Data.xlsx")%>% 
  janitor::clean_names()
trash_df

# Question 3 dataset
bakers_df = read_csv("./data/gbb_datasets/bakers.csv")%>% 
  janitor::clean_names()
bakers_df

bakes_df = read_csv("./data/gbb_datasets/bakes.csv")%>% 
  janitor::clean_names()
bakes_df

results_df = read_csv("./data/gbb_datasets/results.csv")%>% 
  janitor::clean_names()
results_df
```

### Question 1
```{r Q1}
transit_df = read_csv(file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%  #import data
  janitor::clean_names() %>%  #clean column name
  select(line, station_name, station_latitude, station_longitude, route1 : route11, entry, vending, entrance_type, ada) %>% #retain the columns desired
  mutate(entry = 
    ifelse(entry == "Yes", TRUE, FALSE
    ) #changes the Yes/No of the Entry column into logical values
          )
transit_df

# total distinct stations
distinct_station = distinct(transit_df, line, station_name) %>% 
  nrow() %>% 
  print()

# total distinct stations that are ADA compliant
ada_compliant = filter(transit_df, ada == TRUE) %>% 
  distinct(line, station_name) %>% 
  nrow() %>% 
  print()

# proportion of station entrances / exits without vending allow entrance?
    # no vending / total entrances
entry_no_vending = filter(transit_df, vending == "NO", entry = TRUE) %>% 
  nrow() %>% 
  print()

total_entry = filter(transit_df, entry = TRUE) %>% 
  nrow() %>% 
  print()

proportion_nvending_yentry = (entry_no_vending / total_entry) * 100
proportion_nvending_yentry

#Reformatting data
reformatted_transit_df = transit_df %>% 
  mutate(route1 = as.character(route1), 
         route2 = as.character(route2), 
         route3 = as.character(route3), 
         route4 = as.character(route4), 
         route5 = as.character(route5), 
         route6 = as.character(route6), 
         route7 = as.character(route7), 
         route8 = as.character(route8), 
         route9 = as.character(route9), 
         route10 = as.character(route10), 
         route11 = as.character(route11)
  ) %>% 
  pivot_longer(
  route1 : route11,
  names_to = "route_number",
  values_to = "train_route"
  )

# total distinct stations that serve train A
distinct_serving_a_station = filter(reformatted_transit_df, train_route == "A") %>% 
  distinct(line, station_name) %>% 
  nrow() %>% 
  print()

# total distinct stations that serve train A and is ADA compliant
distinct_serving_a_station_ada = filter(reformatted_transit_df, train_route == "A", ada == TRUE) %>% 
  distinct(line, station_name) %>% 
  nrow() %>% 
  print()
```
After cleaning the data set, there is now a total of `r nrow(transit_df)` rows and `r ncol(transit_df)` columns. The dataset contains 19 columns which includes the train line, station name, latitue and longitude of the train station, 11 train routes, if an entry exists, if there is vending, type of entrance and if the train station is ADA compliant. The data set is not tidy as it could be tider; for example, routes 1 through 11 could be tidier using pivot_long.

There are a total of `r distinct_station` distinct stations.

There are a total of `r ada_compliant` ADA compliant stations.

`r proportion_nvending_yentry`% of station entrances / exits without vending allow entrance.

There are a total of `r distinct_serving_a_station` distinct stations that serve the A train.

Of the distinct stations that serve the A train, `r distinct_serving_a_station_ada` are ADA compliant.

### Question 2
```{r}



```